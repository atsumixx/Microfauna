<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Items - Microfauna Sales Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>üõ†Ô∏è Manage Items</h1>

        <!-- Add New Item Form -->
        <div class="card">
            <h2>Add New Item</h2>
            <form method="POST" action="{{ url_for('add_item') }}">
                <label for="new_name">Item Name *</label>
                <input type="text" id="new_name" name="name" required placeholder="e.g., Blue Springtail">
                
                <label for="new_price">Price (‚Ç±) *</label>
                <input type="number" id="new_price" name="price" step="0.01" min="0" required placeholder="0.00">
                
                <button class="btn" type="submit">‚ûï Add Item</button>
            </form>
        </div>

        <!-- Existing Items -->
        <div class="card">
            <h2>Existing Items</h2>
            
            {% if items %}
                {% for item in items %}
                <div class="item-management-row {% if not item.active %}inactive{% endif %}">
                    <form method="POST" action="{{ url_for('edit_item', item_id=item.id) }}" style="display: contents;">
                        <input type="text" 
                               name="name" 
                               value="{{ item.name }}" 
                               required
                               style="margin: 0;">
                        <input type="number" 
                               name="price" 
                               value="{{ item.price }}" 
                               step="0.01" 
                               min="0" 
                               required
                               style="margin: 0; width: 150px;">
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-secondary btn-small" type="submit">üíæ Save</button>
                            <form method="POST" 
                                  action="{{ url_for('toggle_item', item_id=item.id) }}" 
                                  style="margin: 0;">
                                <button class="btn btn-small {% if item.active %}btn-warning{% else %}btn-activate{% endif %}" 
                                        type="submit">
                                    {% if item.active %}‚è∏Ô∏è Deactivate{% else %}‚ñ∂Ô∏è Activate{% endif %}
                                </button>
                            </form>
                        </div>
                    </form>
                </div>
                {% endfor %}
            {% else %}
                <p style="color: var(--text-secondary); text-align: center; padding: 20px;">
                    No items available. Add your first item above.
                </p>
            {% endif %}
        </div>

        <div class="card" style="background: rgba(0, 255, 136, 0.05); border-color: var(--accent-primary);">
            <h3 style="margin-top: 0;">üí° Tips</h3>
            <ul style="color: var(--text-secondary); margin-left: 20px;">
                <li>Deactivated items won't appear in the "Add Sale" form</li>
                <li>You can reactivate items anytime</li>
                <li>Editing an item won't affect past sales</li>
                <li>Deleting items is not available to preserve sales history</li>
            </ul>
        </div>

        <a class="btn btn-secondary" href="{{ url_for('dashboard') }}">‚Üê Back to Dashboard</a>
    </div>
</body>
</html>